"use strict";var Pokemon;jQuery.extend({getCachedJSON:function(n,t){n=n.replace("//index.json","/index.json");var i={data:null,timestamp:null};$.getJSON(n,function(r){i.data=r;i.timestamp=(new Date).getTime();window.localStorage[n]=JSON.stringify(i);t(i.data)})}});var gtet="greater than or equal to",ltet="less than or equal to",gt="greater than",lt="less than",et="equal to",EvolveOptions={gender:{label:"Gender Equals:"},held_item:{label:"Holding Item:"},item:{label:"Holding Item:"},known_move:{label:"Knows Move:"},known_move_type:{label:"Knows Move-Type:"},location:{label:"At Location:"},min_affection:{label:"Gaining Affection "+gtet},min_beauty:{label:"Building Beauty "+gtet},min_happiness:{label:"Gaining Happiness "+gtet},min_level:{label:"Gaining at least Level:"},needs_overworld_rain:{label:"When Raining"},party_species:{label:"Accompanied By Species:"},party_type:{label:"Accompanied By Pokemon Type:"},relative_physical_stats:{label:"Stats:"},time_of_day:{label:"Time of Day:"},trade_species:{label:"When Traded"}},StatsOptions={speed:{label:"Speed"},"special-defense":{label:"Special Defense"},"special-attack":{label:"Special Attack"},defense:{label:"Defense"},attack:{label:"Attack"},hp:{label:"HP"}};$.fn.pokeCard=function(n){return $(this).filter(function(n,t){return t.classList.contains("poke-card")}).each(function(){var u=$(this),t=u[0],r=function(n,t){n in this||(this[n]=t.apply(this))}.bind(t),i;return r("elSprite",function(){var n=this.appendChild(document.createElement("img"));return n.setAttribute("class","sprite"),n.setAttribute("src",""),n.setAttribute("alt","Pokemon Image"),n.Draw=function(){var n=this.ActivePokemon;return this.elSprite.src=typeof n!="undefined"&&n!==null?"./dist/PokeAPI"+n.sprites.front_default:"./dist/images/404-pokemon.png",this.elSprite}.bind(this),n}),r("elName",function(){var n=this.appendChild(document.createElement("h1")),t,i;return n.innerText="#",t=n.appendChild(document.createElement("span")),t.setAttribute("title","National Pokedex #"),t.setAttribute("aria-label","National Dex Number"),t.setAttribute("name","{['id']}"),n.innerHTML+="&nbsp;",i=n.appendChild(document.createElement("span")),i.setAttribute("title","Pokemon Name"),i.setAttribute("aria-label","Name"),i.setAttribute("name","{['name']}"),n.Draw=function(){var n=this.ActivePokemon;return typeof n!="undefined"&&n!==null?(this.elName.querySelector("[aria-label='National Dex Number']").innerText=n.id.toString(),this.elName.querySelector("[aria-label='Name']").innerText=n.name.substr(0,1).toUpperCase()+n.name.substr(1)):(this.elName.querySelector("[aria-label='National Dex Number']").innerHTML="&mdash;",this.elName.querySelector("[aria-label='Name']").innerHTML="&mdash;"),this.elName}.bind(this),n}),r("elGenus",function(){var n=this.appendChild(document.createElement("h4"));return n.setAttribute("title","Genuse Name"),n.setAttribute("aria-label","Genus Name"),n.setAttribute("name","{['species']['genera'][2]['genus']}"),n.Draw=function(){var n=this.ActivePokemon;return typeof n!="undefined"&&n!==null?this.elGenus.innerText=n.species.genera[2].genus:this.elGenus.innerHTML="&mdash;",this.elGenus}.bind(this),n}),r("elPokeEvolutions",function(){var t=this.appendChild(document.createElement("div")),i,r;return t.setAttribute("class","poke-evolutions"),i=t.appendChild(document.createElement("h6")),i.innerText="Next Evolutionary Form(s)",r=t.appendChild(document.createElement("ul")),t.Draw=function(){var h=this.ActivePokemon,c,t,o,a,r,v,s,l,y,f,e,u,i;if(this.elPokeEvolutions.classList.toggle("hidden",!0),this.removeAttribute("data-evolves-from-id"),this.removeAttribute("data-evolves-from-name"),this.removeAttribute("data-evolves-to-id"),this.removeAttribute("data-evolves-to-name"),typeof h!="undefined"&&h!==null&&(c=this.elPokeEvolutions.querySelector("ul"),c.innerHTML="",t=h.Get.Evolution.Next(),t!==null&&t.length>0)){for(o=Object.getOwnPropertyNames(EvolveOptions),a=t.length,r=0;r<a;r++)if(t[r].evolution_details.length>0){for(v=t[r].evolution_details[0],s=c.appendChild(document.createElement("li")),s.setAttribute("data-evolves-to",t[r].species.name),l=[],y=o.length,f=0;f<y;f++)e=v[o[f]],e!==null&&e!==!1&&e!==""&&l.push(EvolveOptions[o[f]].label+" <strong>"+e.toString())+"<\/strong>";s.innerHTML="<strong>"+t[r].species.name.substr(0,1).toUpperCase()+t[r].species.name.substr(1)+"<\/strong> by "+l.join("<br/>&mdash; ");u=s.appendChild(document.createElement("a"));u.setAttribute("class","btn btn-xs btn-default");u.innerHTML='<i class="glyphicon glyphicon-circle-arrow-right"><\/i>';i=t[r].species.url;i[i.length-1]==="/"&&(i=i.substr(0,i.length-1));i=i.substr(i.lastIndexOf("/")+1);u.setAttribute("data-evolves-to-id",i);u.data=n;u.onclick=function(n){var t=n.currentTarget;$(".poke-loader").toggleClass("show",!0);t.data.pokemon=t.getAttribute("data-evolves-to-id");$(t).closest(".poke-card").pokeCard(t.data)}}this.elPokeEvolutions.classList.toggle("hidden",!1)}return this.elPokeEvolutions}.bind(this),t}),r("elPokeStats",function(){var n=this.appendChild(document.createElement("div")),t;return n.setAttribute("class","poke-stats"),t=n.appendChild(document.createElement("canvas")),t.innerText="This browser does not support HTML5 Canvas!",n.Draw=function(){var i=this.ActivePokemon,t=this.elPokeStats.querySelector("canvas"),n,c=typeof t!="undefined"&&t!==null,r,y,e;if(typeof i!="undefined"&&i!==null&&c)if(delete this.elPokeStats._timeout,"stats"in i){r=t.getBoundingClientRect();t.width=r.width;t.height=r.height;n=t.getContext("2d");var f=r.height/i.stats.length,l=f*.5,a=r.width*.5,v=f*.5;for(n.font=v.toString()+"px Arial",y=i.stats.length,e=0;e<y;e++){var s=i.stats[e],u={x:r.width*.5,y:f*e+f/2-l/2,w:a*(s.base_stat/255),h:l},o={x:u.x,y:u.y,w:a,h:u.h},h={x:r.width*.45,y:f*e+f/2,w:r.width*.5,h:v};n.fillStyle=i.species.color?i.species.color.name:"black";n.fillRect(u.x,u.y,u.w,u.h);n.strokeStyle="black";n.strokeRect(o.x,o.y,o.w,o.h);n.fillStyle="black";n.textAlign="right";n.textBaseline="middle";n.fillText(StatsOptions[s.stat.name].label+" ("+s.base_stat.toString()+"): ",h.x,h.y,h.w)}}else(typeof this.elPokeStats._timeout=="undefined"||this.elPokeStats._timeout===null)&&(this.elPokeStats._timeout=setTimeout(function(){this.Draw()}.bind(this.elPokeStats),100));else c&&(n=t.getContext("2d"),n.fillStyle="black",n.textAlign="center",n.textBaseline="middle",n.fillText("No Base Stats Available",t.width/2,t.height/2,t.width*.75),(typeof this.elPokeStats._timeout=="undefined"||this.elPokeStats._timeout===null)&&(this.elPokeStats._timeout=setTimeout(function(){this.Draw()}.bind(this.elPokeStats),100)));return this.elPokeStats}.bind(this),n}),t.Draw=function(){var n=this.ActivePokemon;return typeof n!="undefined"&&n!==null&&("color"in n.species?this.setAttribute("data-species-color",n.species.color.name):this.hasAttribute("data-species-color")&&this.removeAttribute("data-species-color")),this.elSprite.Draw(),this.elName.Draw(),this.elGenus.Draw(),this.elPokeEvolutions.Draw(),this.elPokeStats.Draw(),this}.bind(t),(typeof n=="undefined"||n===null)&&(n={}),"options"in n||(n.options={}),i=null,t.hasAttribute("data-pokemon")?i=t.getAttribute("data-pokemon"):"pokemon"in n&&(i=n.pokemon),n.options.jqueryPokeCardCallback=function(){this.Draw()}.bind(t),typeof i!="undefined"&&i!==null&&(this.ActivePokemon=new Pokemon(i,n.options)),u})};Pokemon=function(n,t){return this._includes={},$.getCachedJSON("./dist/PokeAPI/api/v2/pokemon/"+n+"/index.json",function(n){var f=function(n){for(var i=Object.getOwnPropertyNames(n),r=i.length,t=0;t<r;t++)this[i[t]]=n[i[t]];return this},o,u,r,e,i;if(f.apply(this,[n]),o=this,u=function u(n,t){var o,i;this.origin._includes[n]="pending";var s=function(n,t){var i,f,r;if(typeof t!="undefined"&&t!==null&&"includes"in t&&(i=Object.getOwnPropertyNames(t.includes),i.length>0))for(f=i.length,r=0;r<f;r++)Object.getOwnPropertyNames(t.includes[i[r]]).length>0?u.apply({origin:this.origin,item:n},[i[r],t.includes[i[r]]]):u.apply({origin:this.origin,item:n},[i[r]])}.bind(this),r=function(n){f.apply(this.item,[n]);s.apply(this.that,[this.item,this.options]);this.that.origin._includes[this.prop]="done"},e="./dist/PokeAPI";if(n in this.item)if("length"in this.item[n]&&!("url"in this.item[n]))for(o=this.item[n].length,i=0;i<o;i++)typeof t!="undefined"&&t!==null&&"target"in t?"url"in this.item[n][i][t.target]&&$.getCachedJSON(e+this.item[n][i][subProp].url+"/index.json",r.bind({that:this,item:this.item[n][i][t.target],prop:n,options:t})):"url"in this.item[n][i]&&$.getCachedJSON(e+this.item[n][i].url+"/index.json",r.bind({that:this,item:this.item[n][i],prop:n,options:t}));else"url"in this.item[n]?$.getCachedJSON(e+this.item[n].url+"/index.json",r.bind({that:this,item:this.item[n],prop:n,options:t})):console.warn("[Pokemon.fncFillProperties] No array detected and no URL property available: ",this.item[n]);else console.warn("[Pokemon.fncFillProperties] No '"+n+"' in item: ",this.item)},this._options=t,typeof t!="undefined"&&t!==null)if("includes"in t){for(r=Object.getOwnPropertyNames(t.includes),e=r.length,i=0;i<e;i++)Object.getOwnPropertyNames(t.includes[r[i]]).length>0?u.apply({origin:this,item:this},[r[i],t.includes[r[i]]]):u.apply({origin:this,item:this},[r[i]]);this._includes._interval=setInterval(function(){for(var t=Object.getOwnPropertyNames(this._includes),i=!0,r=t.length,n=0;n<r;n++)t[n]!=="_interval"&&this._includes[t[n]]==="pending"&&(i=!1);i&&(clearInterval(this._includes._interval),this._options.callback.apply(this))}.bind(this),100)}else"callback"in t&&t.callback.apply(this)}.bind(this)),this.Get={Evolution:{_FindCurrent:function(){var t=this,n;if("species"in this)if("evolution_chain"in this.species){if("chain"in this.species.evolution_chain)return n=function n(t,i){var r,f,u;if(t.species.name.toLowerCase()===i.toLowerCase())return t;if(t.evolves_to.length>0){for(r=null,f=t.evolves_to.length,u=0;u<f;u++)if(r=n(t.evolves_to[u],i),typeof r!="undefined"&&r!==null)break;return r}},n(this.species.evolution_chain.chain,this.name);console.warn("[Pokemon.Get.Evolution.Next] No Chain data available!")}else console.warn("[Pokemon.Get.Evolution.Next] No Evolutionary Chain data available!");else console.warn("[Pokemon.Get.Evolution.Next] No Species data available!");return null}.bind(this),Next:function(){var n=this.Get.Evolution._FindCurrent("to");return typeof n!="undefined"&&n!==null?n.evolves_to:[]}.bind(this),Previous:function(){return null}.bind(this)}},typeof t!="undefined"&&t!==null&&"jqueryPokeCardCallback"in t&&t.jqueryPokeCardCallback.apply(this),this};