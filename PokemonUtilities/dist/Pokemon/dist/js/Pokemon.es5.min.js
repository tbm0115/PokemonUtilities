"use strict";var Pokemon;jQuery.extend({getCachedJSON:function(n,t){n=n.replace("//index.json","/index.json");var i={data:null,timestamp:null};$.getJSON(n,function(r){i.data=r;i.timestamp=(new Date).getTime();window.localStorage[n]=JSON.stringify(i);t(i.data)})}});var gtet="greater than or equal to",ltet="less than or equal to",gt="greater than",lt="less than",et="equal to",EvolveOptions={gender:{label:"Gender Equals:"},held_item:{label:"Holding Item:"},item:{label:"Using the Item:"},known_move:{label:"Learning the Move:"},known_move_type:{label:"Learning a Move of Type:"},location:{label:"Going to:"},min_affection:{label:"Gaining Affection "+gtet},min_beauty:{label:"Building Beauty "+gtet},min_happiness:{label:"Gaining Happiness "+gtet},min_level:{label:"Gaining at least Level:"},needs_overworld_rain:{label:"When Raining"},party_species:{label:"Accompanied By Species:"},party_type:{label:"Accompanied By Pokemon Type:"},relative_physical_stats:{label:"Stats:"},time_of_day:{label:"Time of Day:"},trade_species:{label:"When Traded"}},StatsOptions={speed:{label:"Speed"},"special-defense":{label:"Special Defense"},"special-attack":{label:"Special Attack"},defense:{label:"Defense"},attack:{label:"Attack"},hp:{label:"HP"}};$.fn.pokeCard=function(n){return $(this).filter(function(n,t){return t.classList.contains("poke-card")}).each(function(){var u=$(this),t=u[0],r=function(n,t){n in this||(this[n]=t.apply(this))}.bind(t),i;return r("elBasicDetails",function(){var u=this.appendChild(document.createElement("div")),n,s,f,t,e,o,i,r;return u.setAttribute("class","chain"),n=u.appendChild(document.createElement("div")),n.setAttribute("class","details biota zoology focused"),n.setAttribute("lang","en"),s=n.appendChild(document.createElement("picture")),s.setAttribute("class","sprite"),f=s.appendChild(document.createElement("img")),f.setAttribute("src","./dist/images/404-pokemon.png"),f.setAttribute("alt","Pok&#0232;mon Image"),f.setAttribute("name","sprites.front_default"),t=n.appendChild(document.createElement("span")),t.setAttribute("class","family"),t.setAttribute("lang","en"),t.setAttribute("style","display: none;"),t.innerHTML="Pok&#0232;mon",e=n.appendChild(document.createElement("span")),e.setAttribute("title","National Pok&#0232;dex #"),e.setAttribute("aria-label","National 'Dex Number"),e.setAttribute("name","id"),o=n.appendChild(document.createElement("div")),o.setAttribute("class","binomial"),i=o.appendChild(document.createElement("p")),i.setAttribute("title","Pok&#0232;mon Name"),i.setAttribute("class","common-name species"),i.setAttribute("aria-label","Name"),i.setAttribute("name","name"),r=o.appendChild(document.createElement("p")),r.setAttribute("title","Genus Name"),r.setAttribute("class","genus"),r.setAttribute("aria-label","Genus Name"),r.setAttribute("name","species.genera[2].genus"),u.Draw=function(){var n=this.ActivePokemon;return typeof n!="undefined"&&n!==null?(this.elBasicDetails.querySelector("picture img").src="./dist/PokeAPI"+n.sprites.front_default,this.elBasicDetails.querySelector("[name='id']").innerText=n.id.toString(),this.elBasicDetails.querySelector(".species").innerText=n.name.substr(0,1).toUpperCase()+n.name.substr(1),this.elBasicDetails.querySelector(".genus").innerText=n.species.genera[2].genus):(this.elBasicDetails.querySelector("picture img").src="./dist/images/404-pokemon.png",this.elBasicDetails.querySelector("[name='id']").innerHTML="&mdash;",this.elBasicDetails.querySelector(".species").innerHTML="&mdash;",this.elBasicDetails.querySelector(".genus").innerHTML="&mdash;"),this.elBasicDetails}.bind(this),u}),r("elToolPanel",function(){var n=this.appendChild(document.createElement("div"));return n.setAttribute("class","poke-tools"),n.tools=n.appendChild(document.createElement("div")),n.tools.setAttribute("class","poke-tools-options"),n.container=n.appendChild(document.createElement("div")),n.container.setAttribute("class","poke-tools-container"),n.Draw=function(){var i=this.ActivePokemon,t,r,n;if(typeof i!="undefined"&&i!==null)for(t=$(this.elToolPanel).find(".poke-tools-options button"),r=t.length,n=0;n<r;n++)t[n].onclick=function(n){var t=$(n.currentTarget).closest(".poke-card")[0],i=n.currentTarget.getAttribute("data-target");$(t.elToolPanel.tools).find("button").removeClass("active");$(t.elToolPanel.container).find("div").removeClass("active");$(n.currentTarget).addClass("active");$(t.elToolPanel.container).find(i).addClass("active");t[n.currentTarget.getAttribute("data-obj")].Draw()},n===0&&t[n].click();return this.elToolPanel}.bind(this),n}),r("elPokeEvolutions",function(){var t={button:this.elToolPanel.tools.appendChild(document.createElement("button")),panel:this.elToolPanel.container.appendChild(document.createElement("div"))},i,r;return t.button.innerHTML="E",t.button.setAttribute("data-target",".poke-evolutions"),t.button.setAttribute("data-obj","elPokeEvolutions"),t.panel.setAttribute("class","poke-evolutions"),i=t.panel.appendChild(document.createElement("h6")),i.innerText="Next Evolutionary Form(s)",r=t.panel.appendChild(document.createElement("ul")),t.Draw=function(){var h=this.ActivePokemon,c,t,o,a,r,v,s,l,y,f,e,u,i;if(this.elPokeEvolutions.panel.classList.toggle("hidden",!0),this.removeAttribute("data-evolves-from-id"),this.removeAttribute("data-evolves-from-name"),this.removeAttribute("data-evolves-to-id"),this.removeAttribute("data-evolves-to-name"),typeof h!="undefined"&&h!==null){if(c=this.elPokeEvolutions.panel.querySelector("ul"),c.innerHTML="",t=h.Get.Evolution.Next(),t!==null&&t.length>0){for(o=Object.getOwnPropertyNames(EvolveOptions),a=t.length,r=0;r<a;r++)if(t[r].evolution_details.length>0){for(v=t[r].evolution_details[0],s=c.appendChild(document.createElement("li")),s.setAttribute("data-evolves-to",t[r].species.name),l=[],y=o.length,f=0;f<y;f++)e=v[o[f]],e!==null&&e!==!1&&e!==""&&l.push(EvolveOptions[o[f]].label+" <strong>"+e.toString()+"<\/strong>");s.innerHTML="<strong>"+t[r].species.name.substr(0,1).toUpperCase()+t[r].species.name.substr(1)+"<\/strong> by "+l.join("<br/>&amp; ");u=s.appendChild(document.createElement("a"));u.setAttribute("class","btn btn-xs btn-default");u.innerHTML='<i class="glyphicon glyphicon-circle-arrow-right"><\/i>';i=t[r].species.url;i[i.length-1]==="/"&&(i=i.substr(0,i.length-1));i=i.substr(i.lastIndexOf("/")+1);u.setAttribute("data-evolves-to-id",i);u.data=n;u.onclick=function(n){var t=n.currentTarget;$(".poke-loader").toggleClass("show",!0);t.data.pokemon=t.getAttribute("data-evolves-to-id");$(t).closest(".poke-card").pokeCard(t.data)}}this.elPokeEvolutions.panel.classList.toggle("hidden",!1)}}else this.elPokeEvolutions.panel.querySelector("ul").innerHTML="<li>No Further Evolutionary Form(s)<\/li>";return this.elPokeEvolutions}.bind(this),t}),r("elPokeStats",function(){var n={button:this.elToolPanel.tools.appendChild(document.createElement("button")),panel:this.elToolPanel.container.appendChild(document.createElement("div"))},t;return n.button.innerHTML="S",n.button.setAttribute("data-target",".poke-stats"),n.button.setAttribute("data-obj","elPokeStats"),n.panel.setAttribute("class","poke-stats"),t=n.panel.appendChild(document.createElement("canvas")),t.innerText="This browser does not support HTML5 Canvas!",n.Draw=function(){var t=this.ActivePokemon,i=this.elPokeStats.panel.querySelector("canvas"),n,c=typeof i!="undefined"&&i!==null,r,y,e;if(typeof t!="undefined"&&t!==null&&c)if(delete this.elPokeStats._timeout,"stats"in t){r=i.getBoundingClientRect();i.width=r.width;i.height=r.height;n=i.getContext("2d");var f=r.height/t.stats.length,l=f*.5,a=r.width*.5,v=f*.5;for(n.font=v.toString()+"px Arial",y=t.stats.length,e=0;e<y;e++){var s=t.stats[e],u={x:r.width*.5,y:f*e+f/2-l/2,w:a*(Number(s.base_stat)/255),h:l},o={x:u.x,y:u.y,w:a,h:u.h},h={x:r.width*.5,y:f*e+f/2,w:r.width*.5,h:v};n.fillStyle=typeof t.species.color!="undefined"&&t.species.color!==null?t.species.color.name==="white"?"silver":t.species.color.name:"black";n.fillRect(u.x,u.y,u.w,u.h);n.strokeStyle="black";n.strokeRect(o.x,o.y,o.w,o.h);n.fillStyle="black";n.textAlign="right";n.textBaseline="middle";n.fillText(StatsOptions[s.stat.name].label+" ("+s.base_stat.toString()+"): ",h.x,h.y,h.w)}}else(typeof this.elPokeStats._timeout=="undefined"||this.elPokeStats._timeout===null)&&(this.elPokeStats._timeout=setTimeout(function(){this.Draw()}.bind(this.elPokeStats),100));else c&&(n=i.getContext("2d"),n.fillStyle="black",n.textAlign="center",n.textBaseline="middle",n.fillText("No Base Stats Available",i.width/2,i.height/2,i.width*.75),(typeof this.elPokeStats._timeout=="undefined"||this.elPokeStats._timeout===null)&&(this.elPokeStats._timeout=setTimeout(function(){this.Draw()}.bind(this.elPokeStats),100)));return this.elPokeStats}.bind(this),n}),t.Draw=function(){var n=this.ActivePokemon;return typeof n!="undefined"&&n!==null&&("color"in n.species?this.setAttribute("data-species-color",n.species.color.name):this.hasAttribute("data-species-color")&&this.removeAttribute("data-species-color")),this.elBasicDetails.Draw(),this.elToolPanel.Draw(),this}.bind(t),(typeof n=="undefined"||n===null)&&(n={}),"options"in n||(n.options={}),i=null,t.hasAttribute("data-pokemon")?i=t.getAttribute("data-pokemon"):"pokemon"in n&&(i=n.pokemon),n.options.jqueryPokeCardCallback=function(){this.Draw()}.bind(t),typeof i!="undefined"&&i!==null&&(this.ActivePokemon=new Pokemon(i,n.options)),u})};Pokemon=function(n,t){return this._includes={},$.getCachedJSON("./dist/PokeAPI/api/v2/p/"+n+"/index.json",function(n){var f=function(n){for(var i=Object.getOwnPropertyNames(n),r=i.length,t=0;t<r;t++)this[i[t]]=n[i[t]];return this},o,u,r,e,i;if(f.apply(this,[n]),o=this,u=function u(n,t){var o,i;this.origin._includes[n]="pending";var s=function(n,t){var i,f,r;if(typeof t!="undefined"&&t!==null&&"includes"in t&&(i=Object.getOwnPropertyNames(t.includes),i.length>0))for(f=i.length,r=0;r<f;r++)Object.getOwnPropertyNames(t.includes[i[r]]).length>0?u.apply({origin:this.origin,item:n},[i[r],t.includes[i[r]]]):u.apply({origin:this.origin,item:n},[i[r]])}.bind(this),r=function(n){f.apply(this.item,[n]);s.apply(this.that,[this.item,this.options]);this.that.origin._includes[this.prop]="done"},e="./dist/PokeAPI/api/v2";if(n in this.item)if("length"in this.item[n]&&!("url"in this.item[n]))for(o=this.item[n].length,i=0;i<o;i++)typeof t!="undefined"&&t!==null&&"target"in t?"url"in this.item[n][i][t.target]&&$.getCachedJSON(e+this.item[n][i][subProp].url+"/index.json",r.bind({that:this,item:this.item[n][i][t.target],prop:n,options:t})):"url"in this.item[n][i]&&$.getCachedJSON(e+this.item[n][i].url+"/index.json",r.bind({that:this,item:this.item[n][i],prop:n,options:t}));else"url"in this.item[n]?$.getCachedJSON(e+this.item[n].url+"/index.json",r.bind({that:this,item:this.item[n],prop:n,options:t})):console.warn("[Pokemon.fncFillProperties] No array detected and no URL property available: ",this.item[n]);else console.warn("[Pokemon.fncFillProperties] No '"+n+"' in item: ",this.item)},this._options=t,typeof t!="undefined"&&t!==null)if("includes"in t){for(r=Object.getOwnPropertyNames(t.includes),e=r.length,i=0;i<e;i++)Object.getOwnPropertyNames(t.includes[r[i]]).length>0?u.apply({origin:this,item:this},[r[i],t.includes[r[i]]]):u.apply({origin:this,item:this},[r[i]]);this._includes._interval=setInterval(function(){for(var t=Object.getOwnPropertyNames(this._includes),i=!0,r=t.length,n=0;n<r;n++)t[n]!=="_interval"&&this._includes[t[n]]==="pending"&&(i=!1);i&&(clearInterval(this._includes._interval),this._options.callback.apply(this))}.bind(this),100)}else"callback"in t&&t.callback.apply(this)}.bind(this)),this.Get={Evolution:{_FindCurrent:function(){var t=this,n;if("species"in this)if("evolution_chain"in this.species){if("chain"in this.species.evolution_chain)return n=function n(t,i){var r,f,u;if(t.species.name.toLowerCase()===i.toLowerCase())return t;if(t.evolves_to.length>0){for(r=null,f=t.evolves_to.length,u=0;u<f;u++)if(r=n(t.evolves_to[u],i),typeof r!="undefined"&&r!==null)break;return r}},n(this.species.evolution_chain.chain,this.name);console.warn("[Pokemon.Get.Evolution.Next] No Chain data available!")}else console.warn("[Pokemon.Get.Evolution.Next] No Evolutionary Chain data available!");else console.warn("[Pokemon.Get.Evolution.Next] No Species data available!");return null}.bind(this),Next:function(){var n=this.Get.Evolution._FindCurrent("to");return typeof n!="undefined"&&n!==null?n.evolves_to:[]}.bind(this),Previous:function(){return null}.bind(this)}},typeof t!="undefined"&&t!==null&&"jqueryPokeCardCallback"in t&&t.jqueryPokeCardCallback.apply(this),this};