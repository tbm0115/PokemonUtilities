"use strict";var ComparisonDTO=function(n,t,i,r,u){return this.name=n,this.id=t,this.color=i,this.stats=r,this.icon=u,this};$.fn.Comparison=function(n){return $(this).filter(function(n,t){return t.nodeName==="CANVAS"}).each(function(){var i=$(this),t=i[0];return t.Options=n,"fncOnMouseMove"in t||(t.fncGetMousePos=function(n){var t=this.getBoundingClientRect();return{x:n.clientX-t.left,y:n.clientY-t.top}}.bind(t),t.fncOnMouseMove=function(n){var t=this.fncGetMousePos(n);this.Draw(t)}.bind(t),t.onmousemove=t.fncOnMouseMove),t.elImageContainer={},t.Draw=function(n){var i=this.Options.items,c=this.getBoundingClientRect(),lt,o,d,u,rt,h,tt,ht,f;this.width=c.width;this.height=c.height;var w="",b=this.Options.properties,k=c.width/2*.75,a=k/(b.length-1),s=360/i.length,t=this.getContext("2d");for(t.translate(c.width/2,c.height/2),lt=t.save(),o=function(n,t){return this.Radius=n,this.Theta=t,this.toCartesian=function(){return{x:Math.floor(this.Radius*Math.cos(this.Theta)),y:Math.floor(this.Radius*Math.sin(this.Theta))}}.bind(this),this.Cartesian=this.toCartesian(),this},d=i.length,u=0;u<d;u++){for(t.rotate(2*(u+1/d)*Math.PI),rt=b.length,h=0;h<rt;h++){t.strokeStyle="silver";t.fillStyle=i[u].color;t.lineWidth=1;var v=b[h],l=i[u].stats[v],at=u>0?i[u-1]:i[i.length-1],vt=u<i.length-1?i[u+1]:i[0],ut={left:l/(l+at.stats[v]),right:l/(l+vt.stats[v])},yt=s/2,g=h*a,nt=h*a+a,ft=yt,y=ft-s*ut.left,p=ft+s*ut.right,et=new o(g,y*Math.PI/180),ot=new o(nt,y*Math.PI/180),st=new o(nt,p*Math.PI/180),pt=new o(g,p*Math.PI/180);t.beginPath();t.moveTo(et.Cartesian.x,et.Cartesian.y);t.lineTo(ot.Cartesian.x,ot.Cartesian.y);t.arc(0,0,nt,y*Math.PI/180,p*Math.PI/180);t.lineTo(st.Cartesian.x,st.Cartesian.y);t.arc(0,0,g,p*Math.PI/180,y*Math.PI/180,!0);typeof n!="undefined"&&n!==null&&t.isPointInPath(n.x,n.y)&&(w=v+": "+l.toString(),t.lineWidth=2.5,t.strokeStyle="navyblue");t.closePath();t.fill();t.stroke()}tt=new o(k,0);t.beginPath();t.moveTo(0,0);t.lineTo(tt.Cartesian.x,tt.Cartesian.y);t.arc(0,0,k+a,0,s*Math.PI/180);t.lineTo(0,0);t.stroke();t.closePath()}for(t.restore(),ht=i.length,f=0;f<ht;f++){var ct=new o(this.width*.9/2,(s/2+s*(f+1))*Math.PI/180),r=96,e=this.elImageContainer[i[f].id],it={x:Math.floor(ct.Cartesian.x-r/2),y:Math.floor(ct.Cartesian.y-r/2)};typeof e=="undefined"||e===null||e.data===null?(this.elImageContainer[i[f].id]={img:new Image(r,r),data:null,canv:document.createElement("canvas")},e=this.elImageContainer[i[f].id],e.canv.width=r,e.canv.height=r,e.img.onload=function(){console.log("\tReceived new image data!",this);var n=this.data.canv.getContext("2d");n.drawImage(this.data.img,0,0,r,r);this.data.data=this.data.canv.toDataURL();t.drawImage(this.data.img,this.point.x,this.point.y,r,r)}.bind({point:it,data:this.elImageContainer[i[f].id]}),console.log("Requesting new image data..."),e.img.src=i[f].icon):t.drawImage(e.img,it.x,it.y,r,r)}return w!==""&&(t.fillStyle="black",t.font=this.height*.25+"px Arial",t.textAlign="center",t.textBaseline="middle",t.fillText(w,0,0,this.width*.75)),i}.bind(t),t.Draw(),i})};