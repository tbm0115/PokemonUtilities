"use strict";jQuery.extend({getCachedJSON:function(n,t){n=n.replace("//index.json","/index.json");$.getJSON(n,function(n){t(n)})}});var gtet="greater than or equal to",ltet="less than or equal to",gt="greater than",lt="less than",et="equal to",EvolveOptions={gender:{label:"Gender Equals:"},held_item:{label:"Holding Item:"},item:{label:"Using the Item:"},known_move:{label:"Learning the Move:"},known_move_type:{label:"Learning a Move of Type:"},location:{label:"Going to:"},min_affection:{label:"Gaining Affection "+gtet},min_beauty:{label:"Building Beauty "+gtet},min_happiness:{label:"Gaining Happiness "+gtet},min_level:{label:"Gaining at least Level:"},needs_overworld_rain:{label:"When Raining"},party_species:{label:"Accompanied By Species:"},party_type:{label:"Accompanied By Pokemon Type:"},relative_physical_stats:{label:"Stats:"},time_of_day:{label:"Gaining a level at "},trade_species:{label:"When Traded"}},StatsOptions={speed:{label:"Speed"},"special-defense":{label:"Special Defense"},"special-attack":{label:"Special Attack"},defense:{label:"Defense"},attack:{label:"Attack"},hp:{label:"HP"}};$.fn.pokeCard=function(n){return $(this).filter(function(n,t){return t.classList.contains("poke-card")}).each(function(){var u=$(this),i=u[0],r=function(n,t){n in this||(this[n]=t.apply(this))}.bind(i),t;return r("elBasicDetails",function(){var f=this.appendChild(document.createElement("div")),n,h,e,t,i,o,s,r,u;return f.setAttribute("class","chain"),n=f.appendChild(document.createElement("div")),n.setAttribute("class","details biota zoology focused"),n.setAttribute("lang","en"),h=n.appendChild(document.createElement("picture")),h.setAttribute("class","sprite"),e=h.appendChild(document.createElement("img")),e.setAttribute("src","./images/404-pokemon.png"),e.setAttribute("name","sprites.front_default"),e.setAttribute("alt","Searching for Pokemon"),t=n.appendChild(document.createElement("button")),t.setAttribute("class","poke-favorite"),t.onclick=function(n){var e=n.currentTarget,u=$(e).closest(".poke-card")[0],i,t,f,r;if(typeof u!="undefined"&&u!==null)if(i=u.ActivePokemon,typeof i!="undefined"&&i!==null){if(t={data:null,timestamp:null},typeof window.localStorage.favoritePokemon!="undefined"?t=JSON.parse(window.localStorage.favoritePokemon):t.data=[],t.data.filter(function(n){return n.id===i.id}).length>0){for(f=t.data.length,r=0;r<f;r++)if(t.data[r].id===i.id){t.data.splice(r,1);break}console.log("Removed "+i.name+" from favorites!")}else t.data.push(i),console.log("Saved "+i.name+" to favorites!");window.localStorage.favoritePokemon=JSON.stringify(t);u.elBasicDetails.Draw();drawFavoritePokemonPanel()}else console.error("[Pokemon.Favorite] Couldn't find Active Pokemon in .poke-card!");else console.error("[Pokemon.Favorite] Couldn't find .poke-card!");n.preventDefault()}.bind(this),i=n.appendChild(document.createElement("span")),i.setAttribute("class","family"),i.setAttribute("lang","en"),i.setAttribute("style","display: none;"),i.innerHTML="Pok&#0232;mon",o=n.appendChild(document.createElement("span")),o.setAttribute("title","National Pok&#0232;dex #"),o.setAttribute("aria-label","National 'Dex Number"),o.setAttribute("name","id"),s=n.appendChild(document.createElement("div")),s.setAttribute("class","binomial"),r=s.appendChild(document.createElement("p")),r.setAttribute("title","Pok&#0232;mon Name"),r.setAttribute("class","common-name species"),r.setAttribute("aria-label","Name"),r.setAttribute("name","name"),u=s.appendChild(document.createElement("p")),u.setAttribute("title","Genus Name"),u.setAttribute("class","genus"),u.setAttribute("aria-label","Genus Name"),u.setAttribute("name","species.genera[2].genus"),f.Draw=function(){var n=this.ActivePokemon,i;return typeof n!="undefined"&&n!==null?(this.elBasicDetails.querySelector("picture img").src="/PokeApi"+n.sprites.front_default,this.elBasicDetails.querySelector("picture img").setAttribute("alt",n.name),this.elBasicDetails.querySelector("[name='id']").innerText=n.id.toString(),this.elBasicDetails.querySelector(".species").innerText=n.name.substr(0,1).toUpperCase()+n.name.substr(1),this.elBasicDetails.querySelector(".genus").innerText=n.species.genera[2].genus,window.localStorage.length>0?"favoritePokemon"in window.localStorage?(i=JSON.parse(window.localStorage.favoritePokemon),i.data.filter(function(t){return t.id===n.id}).length>0?t.classList.add("saved"):t.classList.remove("saved")):console.error("[Pokemon.BasicDetails.Draw] No Favorite Pokemon cache to refer to."):console.error("[Pokemon.BasicDetails.Draw] No cache to refer to.")):(this.elBasicDetails.querySelector("picture img").src="./images/404-pokemon.png",this.elBasicDetails.querySelector("picture img").setAttribute("alt","Pokemon Not Found"),this.elBasicDetails.querySelector("[name='id']").innerHTML="&mdash;",this.elBasicDetails.querySelector(".species").innerHTML="&mdash;",this.elBasicDetails.querySelector(".genus").innerHTML="&mdash;",this.elBasicDetails.querySelector(".poke-favorite").setAttribute("disabled")),this.elBasicDetails}.bind(this),f}),r("elToolPanel",function(){var n=this.appendChild(document.createElement("div"));return n.setAttribute("class","poke-tools"),n.tools=n.appendChild(document.createElement("div")),n.tools.setAttribute("class","poke-tools-options"),n.container=n.appendChild(document.createElement("div")),n.container.setAttribute("class","poke-tools-container"),n.Draw=function(){var r=this.ActivePokemon,f=this.getAttribute("data-target"),i,n,u,t;if(typeof r!="undefined"&&r!==null){for(i=!1,n=$(this.elToolPanel).find(".poke-tools-options button"),u=n.length,t=0;t<u;t++)n[t].onclick=function(n){var t=$(n.currentTarget).closest(".poke-card")[0],r=n.currentTarget.getAttribute("data-target"),i=n.currentTarget.getAttribute("data-obj");t.setAttribute("data-target",i);$(t.elToolPanel.tools).find("button").removeClass("active");$(t.elToolPanel.container).find("div").removeClass("active");$(n.currentTarget).addClass("active");$(t.elToolPanel.container).find(r).addClass("active");t[i].Draw()},n[t].getAttribute("data-obj")===f&&(i=!0,n[t].click());!i&&n.length>0&&n[0].click()}return this.elToolPanel}.bind(this),n}),r("elPokeEvolutions",function(){var t={button:this.elToolPanel.tools.appendChild(document.createElement("button")),panel:this.elToolPanel.container.appendChild(document.createElement("div"))},i,r;return t.button.setAttribute("title","View Evolution Conditions"),t.button.innerHTML='<i class="fa fa-level-up"><\/i>',t.button.setAttribute("data-target",".poke-evolutions"),t.button.setAttribute("data-obj","elPokeEvolutions"),t.panel.setAttribute("class","poke-evolutions"),i=t.panel.appendChild(document.createElement("h6")),i.innerText="Next Evolutionary Form(s)",r=t.panel.appendChild(document.createElement("ul")),t.Draw=function(){var e=this.ActivePokemon,y,t,h,p,i,w,a,c,b,o,u,f,v,k,l,s,r;if(this.removeAttribute("data-evolves-from-id"),this.removeAttribute("data-evolves-from-name"),this.removeAttribute("data-evolves-to-id"),this.removeAttribute("data-evolves-to-name"),typeof e!="undefined"&&e!==null)if(y=this.elPokeEvolutions.panel.querySelector("ul"),y.innerHTML="","Get"in e&&"Evolution"in e.Get&&"Next"in e.Get.Evolution)if(t=e.Get.Evolution.Next(),t!==null&&t.length>0){for(h=Object.getOwnPropertyNames(EvolveOptions),p=t.length,i=0;i<p;i++)if(t[i].evolution_details.length>0){for(w=t[i].evolution_details[0],a=y.appendChild(document.createElement("li")),a.setAttribute("data-evolves-to",t[i].species.name),c=[],b=h.length,o=0;o<b;o++)if(u=w[h[o]],u!==null&&u!==!1)if(typeof u=="object"){for(f=u.name,v=f.split("-"),f="",k=v.length,l=0;l<k;l++)f+=v[l].substr(0,1).toUpperCase()+v[l].substr(1)+" ";f=f.trim();c.push(EvolveOptions[h[o]].label+" <strong>"+f.toString()+"<\/strong>")}else u.toString()!==""&&c.push(EvolveOptions[h[o]].label+" <strong>"+u.toString().substr(0,1).toUpperCase()+u.toString().substr(1)+"<\/strong>");a.innerHTML=c.length>0?"<strong>"+t[i].species.name.substr(0,1).toUpperCase()+t[i].species.name.substr(1)+"<\/strong> by "+c.join("<br/>&amp; "):"<strong>"+t[i].species.name.substr(0,1).toUpperCase()+t[i].species.name.substr(1)+'<\/strong> by <span title="Couldn\'t find the lookup for the evolution type">some unknown manner<\/span>';s=a.appendChild(document.createElement("a"));s.setAttribute("class","btn btn-xs btn-default");s.innerHTML='<i class="glyphicon glyphicon-circle-arrow-right"><\/i>';r=t[i].species.url;r[r.length-1]==="/"&&(r=r.substr(0,r.length-1));r=r.substr(r.lastIndexOf("/")+1);s.setAttribute("data-evolves-to-id",r);s.data=n;s.onclick=function(n){var t=n.currentTarget;$(".poke-loader").toggleClass("show",!0);t.data.pokemon=t.getAttribute("data-evolves-to-id");$(t).closest(".poke-card").pokeCard(t.data)}}}else this.elPokeEvolutions.panel.querySelector("ul").innerHTML="<li>No Further Evolutionary Form(s)<\/li>";else this.elPokeEvolutions.panel.querySelector("ul").innerHTML="<li>Favorited Pok&#0232;mon do not have Evolution data saved locally.<\/li>";else this.elPokeEvolutions.panel.querySelector("ul").innerHTML="<li>No Further Evolutionary Form(s)<\/li>";return this.elPokeEvolutions}.bind(this),t}),r("elPokeStats",function(){var n={button:this.elToolPanel.tools.appendChild(document.createElement("button")),panel:this.elToolPanel.container.appendChild(document.createElement("div"))},t;return n.button.setAttribute("title","View Base Stats"),n.button.innerHTML='<i class="fa fa-bar-chart"><\/i>',n.button.setAttribute("data-target",".poke-stats"),n.button.setAttribute("data-obj","elPokeStats"),n.panel.setAttribute("class","poke-stats"),t=n.panel.appendChild(document.createElement("canvas")),t.innerText="This browser does not support HTML5 Canvas!",n.Draw=function(){var t=this.ActivePokemon,i=this.elPokeStats.panel.querySelector("canvas"),n,c=typeof i!="undefined"&&i!==null,r,y,e;if(typeof t!="undefined"&&t!==null&&c)if(delete this.elPokeStats._timeout,"stats"in t){r=i.getBoundingClientRect();i.width=r.width;i.height=r.height;n=i.getContext("2d");var f=r.height/t.stats.length,l=f*.5,a=r.width*.5,v=f*.5;for(n.font=v.toString()+"px Arial",y=t.stats.length,e=0;e<y;e++){var s=t.stats[e],u={x:r.width*.5,y:f*e+f/2-l/2,w:a*(Number(s.base_stat)/255),h:l},o={x:u.x,y:u.y,w:a,h:u.h},h={x:r.width*.5,y:f*e+f/2,w:r.width*.5,h:v};n.fillStyle=typeof t.species.color!="undefined"&&t.species.color!==null?t.species.color.name==="white"?"silver":t.species.color.name:"black";n.fillRect(u.x,u.y,u.w,u.h);n.strokeStyle="black";n.strokeRect(o.x,o.y,o.w,o.h);n.fillStyle="black";n.textAlign="right";n.textBaseline="middle";n.fillText(StatsOptions[s.stat.name].label+" ("+s.base_stat.toString()+"): ",h.x,h.y,h.w)}}else(typeof this.elPokeStats._timeout=="undefined"||this.elPokeStats._timeout===null)&&(this.elPokeStats._timeout=setTimeout(function(){this.Draw()}.bind(this.elPokeStats),100));else c&&(n=i.getContext("2d"),n.fillStyle="black",n.textAlign="center",n.textBaseline="middle",n.fillText("No Base Stats Available",i.width/2,i.height/2,i.width*.75),(typeof this.elPokeStats._timeout=="undefined"||this.elPokeStats._timeout===null)&&(this.elPokeStats._timeout=setTimeout(function(){this.Draw()}.bind(this.elPokeStats),100)));return this.elPokeStats}.bind(this),n}),r("elCompare",function(){var n={button:this.elToolPanel.tools.appendChild(document.createElement("button")),panel:this.elToolPanel.container.appendChild(document.createElement("div"))},t,i,r;return n.button.setAttribute("title","Compare with another Pokemon"),n.button.innerHTML='<i class="fa fa-universal-access"><\/i>',n.button.setAttribute("data-target",".poke-compare"),n.button.setAttribute("data-obj","elCompare"),n.panel.setAttribute("class","poke-compare"),t=n.panel.appendChild(document.createElement("button")),t.setAttribute("data-target","#pnlCompares"),t.setAttribute("class","pull-left btn btn-block btn-success"),t.innerHTML='<i class="fa fa-plus"><\/i> Compare',i=n.panel.appendChild(document.createElement("p")),i.setAttribute("class","alert alert-info"),i.innerHTML="Checking if this Pok&#0232;mon has been added to the comparison chart.",r=n.panel.appendChild(document.createElement("p")),r.innerText="Click 'Compare' in the Comparison List Panel to display the Comparison Chart.",n.Draw=function(){var t=this.ActivePokemon,n=this.elCompare.panel.querySelector("p"),i=this.elCompare.panel.querySelector("button[data-target='#pnlCompares']"),r;return typeof t!="undefined"&&t!==null?(i.setAttribute("data-poke-id",t.id),i.setAttribute("data-poke-name",t.name),i.onclick=null,i.classList.toggle("hidden",!0),document.querySelector("#pnlCompares")!==null?(r=document.querySelector("#pnlCompares").querySelector("[data-poke-id='"+t.id+"']"),r!==null?n.innerHTML="Pok&#0232;mon has already been added to the comparison list.":(i.classList.toggle("hidden",!1),i.onclick=function(n){var f=document.querySelector("#pnlCompares"),t=f.appendChild(document.createElement("div")),r,u,i;t.setAttribute("data-poke-id",n.currentTarget.getAttribute("data-poke-id"));t.setAttribute("data-poke-name",n.currentTarget.getAttribute("data-poke-name"));$(t).data("pokemon",this.pokemon);r=t.appendChild(document.createElement("i"));r.setAttribute("class","icon-sprite-"+this.pokemon.id.toString());u=t.appendChild(document.createElement("span"));u.innerText=this.pokemon.name;i=t.appendChild(document.createElement("a"));i.setAttribute("role","close");i.setAttribute("class","close");i.onclick=function(n){var t=n.currentTarget.parentElement,i=t.parentElement;i.removeChild(t)};this.item.elCompare.Draw();n.preventDefault()}.bind({pokemon:t,item:this}),n.innerHTML="Pok&#0232;mon has not been added to the comparison list yet."),n.setAttribute("class","alert alert-info")):(n.innerHTML="Comparisons not supported on this page!",n.setAttribute("class","alert alert-warning"))):(n.innerHTML="Pok&#0232;mon not identified!",n.setAttribute("class","alert alert-danger")),this.elPokeStats}.bind(this),n}),i.Draw=function(){$(this).trigger("draw.pokemon",[this.ActivePokemon]);var n=this.ActivePokemon;return typeof n!="undefined"&&n!==null&&("color"in n.species?this.setAttribute("data-species-color",n.species.color.name):this.hasAttribute("data-species-color")&&this.removeAttribute("data-species-color")),this.elBasicDetails.Draw(),this.elToolPanel.Draw(),$(this).trigger("drawn.pokemon",[this.ActivePokemon]),this}.bind(i),(typeof n=="undefined"||n===null)&&(n={}),"options"in n||(n.options={}),t=null,i.hasAttribute("data-pokemon")?t=i.getAttribute("data-pokemon"):"pokemon"in n&&(t=n.pokemon),n.options.jqueryPokeCardCallback=function(){this.Draw()}.bind(i),typeof t!="undefined"&&t!==null&&($(this).trigger("pokemon.requesting",[t]),this.ActivePokemon=new Pokemon(t,n.options)),u})};var Pokemon=function(n,t){return this._includes={},$.getCachedJSON("/PokeApi/api/v2/p/"+n+"/index.json",function(n){var f=function(n){for(var i=Object.getOwnPropertyNames(n),r=i.length,t=0;t<r;t++)this[i[t]]=n[i[t]];return this},o,u,r,e,i;if(f.apply(this,[n]),o=this,u=function u(n,t){var o,i;this.origin._includes[n]="pending";var s=function(n,t){var i,f,r;if(typeof t!="undefined"&&t!==null&&"includes"in t&&(i=Object.getOwnPropertyNames(t.includes),i.length>0))for(f=i.length,r=0;r<f;r++)Object.getOwnPropertyNames(t.includes[i[r]]).length>0?u.apply({origin:this.origin,item:n},[i[r],t.includes[i[r]]]):u.apply({origin:this.origin,item:n},[i[r]])}.bind(this),r=function(n){f.apply(this.item,[n]);s.apply(this.that,[this.item,this.options]);this.that.origin._includes[this.prop]="done"},e="/PokeApi/api/v2";if(n in this.item)if("length"in this.item[n]&&!("url"in this.item[n]))for(o=this.item[n].length,i=0;i<o;i++)typeof t!="undefined"&&t!==null&&"target"in t?"url"in this.item[n][i][t.target]&&$.getCachedJSON(e+this.item[n][i][subProp].url+"/index.json",r.bind({that:this,item:this.item[n][i][t.target],prop:n,options:t})):"url"in this.item[n][i]&&$.getCachedJSON(e+this.item[n][i].url+"/index.json",r.bind({that:this,item:this.item[n][i],prop:n,options:t}));else"url"in this.item[n]?$.getCachedJSON(e+this.item[n].url+"/index.json",r.bind({that:this,item:this.item[n],prop:n,options:t})):console.warn("[Pokemon.fncFillProperties] No array detected and no URL property available: ",this.item[n]);else console.warn("[Pokemon.fncFillProperties] No '"+n+"' in item: ",this.item)},this._options=t,typeof t!="undefined"&&t!==null)if("includes"in t){for(r=Object.getOwnPropertyNames(t.includes),e=r.length,i=0;i<e;i++)Object.getOwnPropertyNames(t.includes[r[i]]).length>0?u.apply({origin:this,item:this},[r[i],t.includes[r[i]]]):u.apply({origin:this,item:this},[r[i]]);this._includesCount=0;this._includes._interval=setInterval(function(){var i,r,u,n;for(this._includesCount++,this._includesCount>10&&console.warn("[Pokemon.FillProperties] This is taking a while..."),i=Object.getOwnPropertyNames(this._includes),r=!0,u=i.length,n=0;n<u;n++)i[n]!=="_interval"&&this._includes[i[n]]==="pending"&&(r=!1);r&&(this._includesCount=0,clearInterval(this._includes._interval),typeof t!="undefined"&&t!==null&&"jqueryPokeCardCallback"in t&&t.jqueryPokeCardCallback.apply(this),"callback"in this._options&&this._options.callback.apply(this))}.bind(this),100)}else"callback"in t&&(typeof t!="undefined"&&t!==null&&"jqueryPokeCardCallback"in t&&t.jqueryPokeCardCallback.apply(this),t.callback.apply(this))}.bind(this)),this.Get={Evolution:{_FindCurrent:function(){var t=this,n;if("species"in this)if("evolution_chain"in this.species){if("chain"in this.species.evolution_chain)return n=function n(t,i){var r,f,u;if(t.species.name.toLowerCase()===i.toLowerCase())return t;if(t.evolves_to.length>0){for(r=null,f=t.evolves_to.length,u=0;u<f;u++)if(r=n(t.evolves_to[u],i),typeof r!="undefined"&&r!==null)break;return r}},n(this.species.evolution_chain.chain,this.name);console.warn("[Pokemon.Get.Evolution.Next] No Chain data available!")}else console.warn("[Pokemon.Get.Evolution.Next] No Evolutionary Chain data available!");else console.warn("[Pokemon.Get.Evolution.Next] No Species data available!");return null}.bind(this),Next:function(){var n=this.Get.Evolution._FindCurrent("to");return typeof n!="undefined"&&n!==null?n.evolves_to:[]}.bind(this),Previous:function(){return null}.bind(this)}},this},dbPromise=idb.open("user-dex",1,function(n){var t,i;switch(n.oldVersion){case 0:t=n.createObjectStore("games",{autoIncrement:!0});i=n.createObjectStore("caught-pokemon",{autoIncrement:!0})}}),Game=function(n,t){this.id="id"in n?n.id:-1;this.name=n.name;this.versionGroup={name:"",url:""};"versionGroup"in n&&(this.versionGroup=n.versionGroup);this.pokemon=[];var i=this,r=t;return this.Add=function(n,t,i){var u=this,r=t,f=i,e=this.pokemon.map(function(n){return n.nid}).indexOf(n),o;e<0?o=new PokedexEntry({nid:n,game:u.name,callback:function(n){dbPromise.then(function(t){var i=t.transaction("caught-pokemon","readwrite"),e=i.objectStore("caught-pokemon");return e.add(JSON.stringify(n))["catch"](function(n){console.error("Error: ",n);i.abort();typeof f!="undefined"&&f!==null&&f(n)}).then(function(){u.pokemon.push(n);typeof r!="undefined"&&r!==null&&r(u.pokemon[u.pokemon.length-1])}),i.complete})}}):typeof r!="undefined"&&r!==null&&r(u.pokemon[e])}.bind(this),dbPromise.then(function(n){var t=n.transaction("caught-pokemon","readonly"),i=t.objectStore("caught-pokemon");return i.openCursor()}).then(function u(n){if(n){var t=JSON.parse(n.value);return t.game.toString().toLowerCase()===i.name&&i.pokemon.push(new PokedexEntry(t)),n["continue"]().then(u)}}).then(function(){typeof r!="undefined"&&r!==null&&r(i)}),this},PokedexEntry=function(n){if((typeof n=="undefined"||n===null)&&(n={}),this.nid=n.nid,this.name="name"in n?n.name:null,this.game="game"in n?n.game:null,this.shiny="shiny"in n?n.shiny:!1,this.stats={hp:{base:-1,effort:-1,value:-1},defense:{base:-1,effort:-1,value:-1},specialdefense:{base:-1,effort:-1,value:-1},specialattack:{base:-1,effort:-1,value:-1},attack:{base:-1,effort:-1,value:-1},speed:{base:-1,effort:-1,value:-1}},"stats"in n)this.stats=n.stats,"callback"in n&&n.callback(t);else var t=this,i=new Pokemon(t.nid,{includes:{species:{includes:{evolution_chain:{}}}},callback:function(){var f,i,u,r;for(t.name=this.name,f=this.stats.length,i=0;i<f;i++)u=this.stats[i].stat.name.replace("_","").replace("-",""),r=t.stats[u],typeof r!="undefined"?(r.base=this.stats[i].base_stat,r.effort=this.stats[i].effort,r.value=0):console.error("Couldn't find Stat '"+u+"' in: ",t.stats);"callback"in n&&n.callback(t)}});return this},UserDex={Games:{Items:[],Add:function(n,t,i){var r=t,u=i,f=UserDex.Games.Items.map(function(n){return n.name}).indexOf(n),e;f<0?e=new Game({name:n},function(n){dbPromise.then(function(t){var i=t.transaction("games","readwrite"),f=i.objectStore("games");return f.add(JSON.stringify(n))["catch"](function(n){console.error("Error: ",n);i.abort();typeof u!="undefined"&&u!==null&&u(n)}).then(function(){UserDex.Games.Items.push(n);typeof r!="undefined"&&r!==null&&r(UserDex.Games.Items[UserDex.Games.Items.length-1])}),i.complete})}):typeof r!="undefined"&&r!==null?r(UserDex.Games.Items[f]):console.error("[UserDex.Games.Add] Couldn't add '"+n+"' to UserDex.Games:",f)},Search:function(n,t){var i=t;$.getJSON("/PokeApi/api/v2/v/index.json",function(t){var r=t.results.map(function(n){return n.name});n!==null&&n!==""&&(n=n.toLowerCase(),r=r.filter(function(t){return t===n}));i(r)})},Initialize:function(){dbPromise.then(function(n){return n.transaction("games","readwrite").objectStore("games").getAll()}).then(function(n){UserDex.Games.Items=[];UserDex._initialization={};for(var i=n.length,t=0;t<i;t++)UserDex._initialization[t]=!1,UserDex.Games.Items.push(new Game(JSON.parse(n[t]),function(){UserDex._initialization[this]=!0}.bind(t)));UserDex._initialization.intervalCount=0;UserDex._initialization.interval=setInterval(function(){var t,i,r,n,u;for(UserDex._initialization.intervalCount++,t=!0,i=Object.getOwnPropertyNames(UserDex._initialization),r=i.length,n=0;n<r;n++)if(u=UserDex._initialization[i[n]].toString(),u==="false"){t=!1;break}t?(clearInterval(UserDex._initialization.interval),$(document).trigger("userdex.initialized",[UserDex.Games.Items])):UserDex._initialization.intervalCount>20&&(console.warn("[UserDex.Initialization] Timed out!"),clearInterval(UserDex._initialization.interval))},50)})},Contains:{Pokemon:function(n){var t,f,i,r,e,u;for(n=n.toString(),t=!1,f=UserDex.Games.Items.length,i=0;i<f;i++)if(r=UserDex.Games.Items[i],r.pokemon.length>0){for(e=r.pokemon.length,u=0;u<e;u++)if(r.pokemon[u].nid.toString()===n){t=!0;break}if(t)break}return t}},Get:{Pokemon:function(){for(var t,f,r,i,n={},e=UserDex.Games.Items.length,u=0;u<e;u++)if(t=UserDex.Games.Items[u],t.pokemon.length>0)for(f=t.pokemon.length,r=0;r<f;r++)i=t.pokemon[r].nid,i in n||(n[i]=t.pokemon[r]),"games"in n[i]||(n[i].games=[]),n[i].games.indexOf(t.name)<0&&n[i].games.push(t.name);return n}}}};UserDex.Games.Initialize();